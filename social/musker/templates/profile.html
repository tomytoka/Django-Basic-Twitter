{% extends 'base.html' %}
{%load static%}
{% block content %}
{%if profile%}
<div class="container text-center">
    <div class="row">
        <div class="col-8">
            <h1>{{profile.user.username}}'s Profile</h1>
            </br>
            </br>
            {%if posts %}
              {%for post in posts %}
              <div class="alert alert-info" role="alert">
                <div class="container" >
                  <div class="row">
                    <div class="col-1">
                      {%if profile.profile_image%}
                      <img src="{{profile.profile_image.url}}" class="rounded-circle" width="50" height="50" alt="{{profiles.user.username}}">
                      {%else%}
                      <img src="{%static 'images/default-picture.jpeg'%}" class="rounded-circle" width="50" height="50" alt="{{profiles.user.username}}">
                      {%endif%}
                    </div>
                    <div class="col-10">
                {{post.body}}
               </br>
                <small class="text-muted">
                   {{post.created_at}} by @{{post.user.username}}
                </small>
                    </div>
                  </div>
                </div>
              </div>
              {%endfor%}
           {%endif%} 
        </div>
        <div class="col-4">
          </br>
          </br>
          {%if profile.profile_image%}
          <img src="{{profile.profile_image.url}}" class="rounded" width="200" height="200">
          {%endif%}
            <div class="card" style="width: 18rem;">
                <div class="card-header">
                <strong> Follows</strong>
                </div>
                <ul class="list-group list-group-flush">
                  {%for following in profile.follows.all%}
                  <li class="list-group-item"><a href="{%url 'profile' following.user.id%}">@{{following}}</a></li>
                  {%endfor%}
                </ul>
              </div>
              <div class="card" style="width: 18rem;">
                <div class="card-header">
                <strong>Followed by</strong>
                </div>
                <ul class="list-group list-group-flush">
                  {%for following in profile.followed_by.all%}
                  <li class="list-group-item"><a href="{%url 'profile' following.user.id%}">@{{following}}</a></li>
                  {%endfor%}
                </ul>
              </div>
            </br>
            <form method="POST">
                {%csrf_token%}
                {%if profile in user.profile.follows.all%}
                <button class="btn btn-outline-danger" name="follow" value="unfollow" type="submit">Unfollow @{{profile.user.username}}</button>
                {%else%}
                <button class="btn btn-outline-success" name="follow" value="follow" type="submit">Follow @{{profile.user.username}}</button>
                
                {%endif%}
            </form> 
          </br>
          {%if request.user.id == profile.user.id%}
          <a href="{%url 'update_user'%}" class="btn btn-outline-primary">Edit profile</a>
          {%endif%}
        </div>
    </div>
</div>


{%endif%}
{%endblock%}